<% if(1 || theme.gitalk) { %>
  <div id="gittalk" sid="<%- page.slug || page.path || 'barretlee-blog' %>">
    
  </div>
  <script charset="utf-8" type="text/javascript" src="/public/js/gittalk.js"></script>
  <script type="text/javascript">
  var gitalk = new Gitalk({
    clientID: '50a1b3aa7854b01a1c85',
    clientSecret: '226ac154f80a6aea0985da874126b35795f22eed',
    language: "zh-CN",
    perPage: 100,
    createIssueManually: false,
    repo: 'blog',
    owner: 'barretlee',
    admin: ['barretlee'],
    id: "<%- page.slug || page.path || 'barretlee-blog' %>",
    distractionFreeMode: false
  });
  gitalk.render('gittalk');

  // show count
  var commentTimer = setInterval(() => {
    var count = document.querySelector('.gt-link-counts');
    var showCount = document.querySelector('.hash-to-comments');
    if (count && showCount) {
      showCount.textContent = count.textContent;
      clearInterval(commentTimer);
    }
  }, 500);
  setTimeout(() => {
    clearInterval(commentTimer);
  }, 60 * 1E3);
  </script>
  <% } %>